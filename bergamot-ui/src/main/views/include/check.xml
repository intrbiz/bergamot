<!DOCTYPE balsa SYSTEM "http://balsa.intrbiz.net/balsa.dtd">
<?RenderLibrary com.intrbiz.balsa?>
<!-- The index view -->
<fragment xmlns="com.intrbiz.balsa">
	<a href="/#{check.type}/id/#{check.id}">
		<div class="col3 dash_icon check" data-check-id="#{check.id}">
			<h3>
				<span class="dash_img #{check.state.status.toString().toLowerCase()}" title="The check is #{check.state.status.toString().toLowerCase()}">
					<img src="/#{check.type}-icon.png" />
				</span>
				<span class="name">#{check.summary}</span>
		    </h3>
		    <p class="field-status">
			    <span class="label">Status: </span>
			    <span class="value">#{check.state.status.toString().substring(0,1) + check.state.status.toString().substring(1).toLowerCase()}</span>
		    </p>
		    <p rendered="#{(check.type == 'service' or check.type == 'trap') and host == null}">
			    <span class="label">Host: </span>
			    <span class="value">#{check.host.summary}</span>
		    </p>
		    <p rendered="#{check.type == 'resource' and cluster == null}">
			    <span class="label">Cluster: </span>
			    <span class="value">#{check.cluster.summary}</span>
		    </p>
		    <p rendered="#{check.type == 'host'}">
		    	<span class="label">Name: </span>
		   		<span class="value">#{check.name} (#{check.address})</span>
	    	</p>
		    <p rendered="#{check.type == 'host' || check.type == 'service' || check.type == 'trap'}" class="field-attempt">
			    <span class="label">Attempt: </span>
			    <span class="value">
			    	<span>#{check.state.attempt} of #{check.currentAttemptThreshold}</span>
			    	<span class="info" rendered="#{check.state.transitioning}" title="The check is changing state">Changing</span>
			    	<span class="info" rendered="#{check.state.hard}" title="The check is in a steady state">Steady</span>
			    </span>
		    </p>				    
		    <p class="field-last-checked">
			    <span class="label">Last checked: </span>
			    <span class="value">#{dateformat('HH:mm:ss', check.state.lastCheckTime)} on #{dateformat('EEEE dd/MM/yyyy', check.state.lastCheckTime)}</span>
		    </p>
		    <p class="output field-output">
			    <span class="label">Output: </span>
			    <span class="value">#{coalesce(check.state.output, '')}</span>
		    </p>
		    <!-- TODO: Spacer -->
		   	<p rendered="#{check.type == 'cluster'}">
		    	<span class="label">&nbsp;</span>
		   		<span class="value">&nbsp;</span>
	    	</p>
	    	<p rendered="#{check.type == 'cluster'}">
		    	<span class="label">&nbsp;</span>
		   		<span class="value">&nbsp;</span>
	    	</p>
		</div>
	</a>
</fragment>