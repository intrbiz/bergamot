<!DOCTYPE balsa SYSTEM "http://balsa.intrbiz.net/balsa.dtd">
<?RenderLibrary com.intrbiz.balsa?>
<!-- The index view -->
<fragment xmlns="com.intrbiz.balsa" title="Admin">
    <div class="row" rendered="#{showDaemons}">
		<h3>System Status</h3>
		<data-set var="daemon" value="#{daemons}">
			<div class="col3 dash_icon check">
				<h3>
					<span class="dash_img status_#{if(daemon.isAlive(),'ok', 'critical')}" title="Daemon #{if(daemon.isAlive(), 'is alive', 'has failed')}">
						<img src="#{public('/images/icons/64/bergamot.png')}" />
					</span>
					<span class="name">#{ucFirst(daemon.daemonName.replace('-', ' '))}</span>
			    </h3>
			    <p>
				    <span class="label">Host: </span>
				    <span class="value">#{daemon.hostName}</span>
			    </p>				    
			    <p>
				    <span class="label">Started At: </span>
				    <span class="value">#{dateformat('HH:mm:ss', daemon.startedAt)} on #{dateformat('EEEE dd/MM/yyyy', daemon.startedAt)}</span>
			    </p>
			    <p>
				    <span class="label">Last Seen: </span>
				    <span class="value">#{dateformat('HH:mm:ss', daemon.lastHeartbeatTime)} on #{dateformat('EEEE dd/MM/yyyy', daemon.lastHeartbeatTime)}</span>
			    </p>
			    <p>
				    <span class="label">&nbsp;</span>
				    <span class="value">(#{daemon.getLastHeartbeatAge() / 1000} seconds ago)</span>
			    </p>
			    <p>
				    <span class="label">Instance Id:</span>
				    <span class="value" style="font-size: 13px;">#{daemon.instanceId}</span>
			    </p>
			    <p>
				    <span class="label">Runtime Id:</span>
				    <span class="value" style="font-size: 13px;">#{daemon.runtimeId}</span>
			    </p>
			</div>
		</data-set>
    </div>
</fragment>