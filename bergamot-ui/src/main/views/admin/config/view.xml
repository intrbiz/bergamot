<!DOCTYPE balsa SYSTEM "http://balsa.intrbiz.net/balsa.dtd">
<?RenderLibrary com.intrbiz.balsa?>
<!-- The index view -->
<fragment xmlns="com.intrbiz.balsa" title="Configuration for #{config.type} #{coalesce(config.summary, config.name)}">
    <div class="row">
   		<h4>XML Configuration</h4>
   		<pre>#{config.getConfiguration().toString()}</pre>
    </div>
    <div class="row">
   		<h4>Resolved Configuration</h4>
   		<p class="text-body">The following is the resultant configuration once templates have been applied:</p>
   		<pre>#{config.getResolvedConfiguration().resolve().toString()}</pre>
    </div>
    <div class="row">
    	<a href="/admin/configchange/add/contact/id/#{config.id}" class="add">Edit this #{config.type}</a>
    	<a href="/admin/configchange/remove/contact/id/#{config.id}" class="remove">Remove this #{config.type}</a>
    </div>
    <div class="row" rendered="#{config.template}">
    	<h4>Dependents</h4>
    	<p>Any change to this configuration template, will cascade to the following:</p>
    	<table>
    		<tr>
    			<th>Type</th>
    		    <th>Display Name</th>
    			<th>Name</th>
    		</tr>
    		<data-set var="dep" value="#{config.listAllDependentsObjects()}">
    			<tr>
    				<td>#{ucfirst(dep.type)}</td>
    			    <td><a href="/admin/config/id/#{dep.id}" title="Configure">#{coalesce(dep.summary, ucfirst(dep.name))}</a></td>
    				<td>#{dep.name}</td>
    			</tr>
    		</data-set>
    	</table>
    </div>
</fragment>