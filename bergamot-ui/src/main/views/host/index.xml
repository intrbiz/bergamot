<!DOCTYPE balsa SYSTEM "http://balsa.intrbiz.net/balsa.dtd">
<?RenderLibrary com.intrbiz.balsa?>
<!-- The index view -->
<fragment xmlns="com.intrbiz.balsa" title="Hosts">

	<data-set var="hostgroup" value="#{hostgroups}">
		<div class="row hostgroup">
		
			<h2>#{hostgroup.displayName}</h2>
			
			<div>
				<p>
					<span>Ok:</span>
					<span>#{hostgroup.state.ok}</span>
				</p>
				<p>
					<span>Status:</span>
					<span>#{hostgroup.state.status}</span>
				</p>
				<p>
					<span>Services OK:</span>
					<span>#{hostgroup.state.okCount}</span>
				</p>
				<p>
					<span>Services WARNING:</span>
					<span>#{hostgroup.state.warningCount}</span>
				</p>
				<p>
					<span>Services CRITICAL:</span>
					<span>#{hostgroup.state.criticalCount}</span>
				</p>
			</div>
			
			<data-set var="host" value="#{hostgroup.hosts}">
				<a href="/host/#{host.name}">
					<div class="col3 host">
						<span class="dash_img" style="background: url(/linux-icon.png) no-repeat"></span>
						<p>
							<span>Name: </span>
							<span>#{host.displayName}</span>
						</p>
						<p>
							<span>Host name: </span>
							<span>#{host.name}</span>
						</p>
						<p>
							<span>Status: </span>
							<span class="state #{host.state.status.toString().toLowerCase()}" title="#{host.state.status}"></span>
						</p>
						<p>
							<span>Last checked on: </span>
							<span>#{dateformat('EEE dd/MM/yyyy', host.state.lastCheckTime)}</span>
						</p>
						<p>
							<span>Last checked at: </span>
							<span>#{dateformat('HH:mm:ss', host.state.lastCheckTime)}</span>
						</p>
						<p>
							<span class="output">Output: </span>
							<span class="output">#{coalesce(host.state.output, '')}</span>
						</p>
						<p>
							<span>Services Ok:</span>
							<span>#{host.servicesState.ok}</span>
						</p>
						<p>
							<span>Status:</span>
							<span>#{host.servicesState.status}</span>
						</p>
						<p>
							<span>Services OK:</span>
							<span>#{host.servicesState.okCount}</span>
						</p>
						<p>
							<span>Services WARNING:</span>
							<span>#{host.servicesState.warningCount}</span>
						</p>
						<p>
							<span>Services CRITICAL:</span>
							<span>#{host.servicesState.criticalCount}</span>
						</p>
					</div>
				</a>
			</data-set>
			
		</div>
	</data-set>

</fragment>