<!DOCTYPE balsa SYSTEM "http://balsa.intrbiz.net/balsa.dtd">
<?RenderLibrary com.intrbiz.balsa?>
<!-- The index view -->
<fragment xmlns="com.intrbiz.balsa" title="Services">

	<data-set var="servicegroup" value="#{servicegroups}">
		<div class="row hostgroup">
		
			<h2>#{servicegroup.displayName}</h2>
			
			<div>
				<p>
					<span>Ok:</span>
					<span>#{servicegroup.state.ok}</span>
				</p>
				<p>
					<span>Status:</span>
					<span>#{servicegroup.state.status}</span>
				</p>
				<p>
					<span>Services OK:</span>
					<span>#{servicegroup.state.okCount}</span>
				</p>
				<p>
					<span>Services WARNING:</span>
					<span>#{servicegroup.state.warningCount}</span>
				</p>
				<p>
					<span>Services CRITICAL:</span>
					<span>#{servicegroup.state.criticalCount}</span>
				</p>
			</div>
			
			<data-set var="service" value="#{servicegroup.services}">
				<a href="/service/#{service.id}">
					<div class="col3 host">
						<span class="dash_img" style="background: url(/applications-system.png) no-repeat"></span>
						<p>
							<span>Check: </span>
							<span>#{service.name}</span>
						</p>
						<p>
							<span>Host: </span>
							<span>#{service.host.displayName}</span>
						</p>
						<p>
							<span>Status: </span>
							<span class="state #{service.state.status.toString().toLowerCase()}" title="#{service.state.status}"></span>
						</p>
						<p>
							<span>Last checked on: </span>
							<span>#{dateformat('EEE dd/MM/yyyy', service.state.lastCheckTime)}</span>
						</p>
						<p>
							<span>Last checked at: </span>
							<span>#{dateformat('HH:mm:ss', service.state.lastCheckTime)}</span>
						</p>
						<p>
							<span class="output">Output: </span>
							<span class="output">#{coalesce(service.state.output, '')}</span>
						</p>
					</div>
				</a>
			</data-set>
			
		</div>
	</data-set>

</fragment>