<!DOCTYPE balsa SYSTEM "http://balsa.intrbiz.net/balsa.dtd">
<?RenderLibrary com.intrbiz.balsa?>
<!-- The index view -->
<fragment xmlns="com.intrbiz.balsa" title="Services in #{servicegroup.displayName}">
	<div class="row">
		<data-set var="service" value="#{services}">
			<a href="/service/id/#{service.id}">
				<div class="col3 dash_icon">
					<h3>
						<span class="dash_img #{service.state.status.toString().toLowerCase()}" title="The service is #{service.state.status.toString().toLowerCase()}">
							<img src="/applications-system.png" />
						</span>
						<span class="name">#{service.displayName}</span>
				    </h3>
				    <p>
					    <span class="label">Status: </span>
					    <span class="value">#{service.state.status.toString().substring(0,1) + service.state.status.toString().substring(1).toLowerCase()}</span>
				    </p>
				    <p>
					    <span class="label">Host: </span>
					    <span class="value">#{service.host.displayName}</span>
				    </p>				    
				    <p class="output">
					    <span class="label">Output: </span>
					    <span class="value">#{coalesce(service.state.output, '')}</span>
				    </p>
				    <p>
					    <span class="label">Attempt: </span>
					    <span class="value">
					    	<span>#{service.state.attempt} of #{service.currentAttemptThreshold}</span>
					    	<span class="info" rendered="#{service.state.transitioning}" title="The service is changing state">Changing</span>
					    	<span class="info" rendered="#{service.state.hard}" title="The service is in a steady state">Steady</span>
					    </span>
				    </p>				    
				    <p>
					    <span class="label">Last checked: </span>
					    <span class="value">#{dateformat('HH:mm:ss', service.state.lastCheckTime)} on #{dateformat('EEEE dd/MM/yyyy', service.state.lastCheckTime)}</span>
				    </p>
				</div>
			</a>
		</data-set>
	</div>
	
	<script type="text/javascript">
		$(document).ready(function(){
			setTimeout(function(){
				window.location = window.location;
			}, 30000);
		});
	</script>
</fragment>