<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<bergamot site="bergamot.template">
    
    <host name="bergamot-server" extends="linux-server-agent" groups="bergamot-servers, -linux-servers" template="yes">
        <summary>A generic Bergamot Monitoring server</summary>
        <notify teams="bergamot-admins"/>
        <parameter description="UI Icon" name="ui-icon">/images/icons/64/bergamot.png</parameter>
    </host>
    
    <host name="bergamot-ui-server" extends="bergamot-server" template="yes">
        <summary>A Bergamot Monitoring UI server</summary>
        
        <service name="bergamot-ui-daemon" extends="bergamot-service">
            <summary>Bergamot UI Daemon</summary>
            <check-command command="check-bergamot-ui-process" />
        </service>
        
        <service name="bergamot-ui-port" extends="bergamot-service">
            <summary>Port: Bergamot UI</summary>
            <check-command command="check-agent-port-listener">
            	<parameter name="local_port">8080</parameter>
            </check-command>
        </service>
        
        <service name="bergamot-cluster-port" extends="bergamot-service">
            <summary>Port: Bergamot UI</summary>
            <check-command command="check-agent-port-listener">
            	<parameter name="local_port">5701</parameter>
            </check-command>
        </service>
    </host>
    
    <host name="bergamot-notifier-server" extends="bergamot-server" template="yes">
        <summary>A Bergamot Monitoring Notifier server</summary>
        
        <service name="bergamot-notifier" extends="bergamot-service">
            <summary>Bergamot Notifier Daemon</summary>
            <check-command command="check-bergamot-notifier-process"/>
        </service>
    </host>
    
    <host name="bergamot-worker-server" extends="bergamot-server" template="yes">
        <summary>A Bergamot Monitoring Worker server</summary>
        
        <service name="bergamot-worker-nagios" extends="bergamot-service">
            <summary>Bergamot Worker Daemon</summary>
            <check-command command="check-bergamot-worker-process"/>
        </service>
    </host>
    
    <host name="bergamot-worker-agent-server" extends="bergamot-server" template="yes">
        <summary>A Bergamot Monitoring Agent Worker server</summary>

        <service name="bergamot-agent-port" extends="bergamot-service">
            <summary>Port: Bergamot Agent</summary>
            <check-command command="check-agent-port-listener">
            	<parameter name="local_port">15080</parameter>
            </check-command>
        </service>
    </host>
    
    <host name="bergamot-postgresql-server" extends="bergamot-server, postgresql-server-agent" template="yes">
        <summary>A Bergamot Monitoring PostgreSQL server</summary>
        
        <service name="bergamot-transitions-size" extends="bergamot-service">
            <summary>Transitions Size</summary>
            <check-command command="bergamot-transitions-size" />
        </service>
        
        <service name="bergamot-readings-size" extends="bergamot-service">
            <summary>Readings Size</summary>
            <check-command command="bergamot-readings-total-size" />
        </service>
    </host>
    
</bergamot>
